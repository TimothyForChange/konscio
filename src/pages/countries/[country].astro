---
import countries from '../../data/mapping/countries.ts';
import CountryLayout from '../../layouts/CountryLayout.astro';
import type * as CountryTypes from '../../types/country';
import { loadCountryData } from '../../utils/data-loaders';

export function getStaticPaths() {
  return ((countries as CountryTypes.Country[]) || []).map((c) => ({
    params: { country: c.slug },
  }));
}

const { country } = Astro.params;
const countryData = await loadCountryData(country);
---

<CountryLayout
  title={`${countryData.name} Crisis`}
  countryData={countryData}
  countrySlug={country}
/>
