---
import CountryLayout from '../layouts/CountryLayout.astro';

export async function getStaticPaths() {
  const countries = (await import('../data/countries.json')).default;
  return (countries || []).map((c) => ({
    params: { country: c.slug },
  }));
}

const { country } = Astro.params;
const countryData = (await import(`../data/countries/${country}.json`)).default;
---

<CountryLayout title={`${countryData.name} Crisis`} countryData={countryData} />
