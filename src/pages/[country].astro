---
import countries from '../data/mapping/countries.json';
import CountryLayout from '../layouts/CountryLayout.astro';
import type * as CountryTypes from '../types/country.ts';

export function getStaticPaths() {
  return ((countries as CountryTypes.Country[]) || []).map((c) => ({
    params: { country: c.slug },
  }));
}

const { country } = Astro.params;
const countryModule = await import(`../data/countries/${country}.json`);
const countryData = countryModule.default as Record<string, unknown> & {
  name?: string;
};
---

<CountryLayout
  title={`${countryData.name} Crisis`}
  countryData={countryData}
  countrySlug={country}
/>
