---
import countries from '../data/countries.json';
import CountryLayout from '../layouts/CountryLayout.astro';
import type * as CountryTypes from '../types/Country';

export function getStaticPaths() {
  return ((countries as CountryTypes.Country[]) || []).map((c) => ({
    params: { country: c.slug },
  }));
}

const { country } = Astro.params;
const countryData = (await import(`../data/countries/${country}.json`))
  .default as Record<string, unknown> & { name?: string };
---

<CountryLayout
  title={`${countryData.name} Crisis`}
  countryData={countryData}
  countrySlug={country}
/>
