---
import userData from '../data/user.json';
import CountryLayout from '../layouts/CountryLayout.astro';

export async function getStaticPaths() {
  return (userData.countries || []).map((c) => ({
    params: { country: c.slug },
  }));
}

const { country } = Astro.params;
const countryData = (await import(`../data/countries/${country}.json`)).default;
---

<CountryLayout title={`${countryData.name} Crisis`} countryData={countryData} />
