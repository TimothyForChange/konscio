---
import { getCountryMetadata } from '../../utils/country.ts';
import BackIcon from '../shared/BackIcon.astro';
import CountryAvatar from '../ui/CountryAvatar.astro';
import DonateButton from '../ui/DonateButton.astro';

export interface Properties {
  countryName: string;
  countrySlug?: string;
}

const { countryName, countrySlug } = Astro.props;
const flagInfo = await getCountryMetadata(countrySlug ?? '');
---

<header class='country-header'>
  <div class='header-content'>
    <BackIcon />
    <DonateButton href='#take-action' />
  </div>
  <h1 class='country-title'>
    {
      flagInfo ? (
        <CountryAvatar
          emoji={flagInfo.emoji}
          ariaLabel={flagInfo.ariaLabel}
          countryName={countryName}
        />
      ) : undefined
    }
    {countryName}
  </h1>
</header>

<style>
  .country-header {
    margin-bottom: var(--section-gap);
  }

  .header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--gap-lg);
  }

  .country-title {
    font-size: 2rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 calc(var(--heading-gap) * 1.25);
    line-height: 1.05;
  }

  @media (width < 768px) {
    .country-title {
      margin-top: var(--gap);
    }
  }

  @media (width >= 768px) {
    .country-title {
      font-size: 2.5rem;
    }
  }
</style>
