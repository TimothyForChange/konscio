---
import ImpactStat from '../ui/ImpactStat.astro';

export interface Props {
  stats: Array<{ label: string; value: string }>;
}

const { stats } = Astro.props as Props;

const safeStats = Array.isArray(stats)
  ? stats
      .filter(
        (stat) => stat && typeof stat === 'object' && stat.label && stat.value
      )
      .map((stat) => ({
        label: typeof stat.label === 'string' ? stat.label : 'Label',
        value: typeof stat.value === 'string' ? stat.value : 'â€”',
      }))
  : [];

if (!safeStats || safeStats.length === 0) {
  return null;
}
---

<div class='impact-stats'>
  {safeStats.map((s) => <ImpactStat label={s.label} value={s.value} />)}
</div>

<style>
  .impact-stats {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--gap);
    margin-top: var(--heading-gap);
  }

  @media (width >= 768px) {
    .impact-stats {
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: var(--gap-lg);
    }

    .stat-item {
      padding: var(--card-padding-sm);
    }
  }
</style>
